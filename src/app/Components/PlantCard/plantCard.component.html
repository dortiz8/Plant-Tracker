
<div *ngIf="(loading$ | async)"><page-loading></page-loading></div>
<div *ngIf="!deletePanelIsOn && !(loading$ | async)" class="card">
    <div class="card-header">
        <div class="card-title">
            <h3>{{ plant.name }}</h3>
            <a class="link-info" [routerLink]="['/plantDetails', plant.id]">Details</a>
        </div>
        <div class="card-subtitle">
            <!-- <p>Genus: {{plant.genusId}}</p> -->
            <p>Added: {{plant.dateAdded | date}}</p>
        </div>
    </div>
    <div class="card-body">
        <div class="d-flex flex-column mb-2">
            <div class="p-2">
                <div class="d-flex justify-content-between">
                    <div>
                        
                        <p>Watered: {{plant.dateWatered | date:'shortDate'}}</p>
                        <!-- <p>Interval: {{plant.waterInterval}} days</p> -->
                        <span *ngIf="plant.waterState == 3" class="badge bg-danger">Past Due</span>
                    </div>
                    <div>
                        <p>Fertilized: {{plant.dateFertilized | date:'shortDate'}}</p>
                        <!-- <p>Interval: {{plant.fertilizeInterval}} days</p> -->
                        <span  *ngIf="plant.fertilizeState == 3" class="badge bg-danger">Past Due</span>
                    </div>
               
                </div>
            </div>
            <div class="p-2">
               
            </div>
            
         
        </div>
    </div>
    <div class="card-footer">
        <div class="d-flex justify-content-end">
            <div style="margin-right: .5rem;">
                <a class="btn btn-primary btn-sm" (click)="waterFertilizePlantPatch('water')">Water</a>
            </div>
            <div style="margin-right: .5rem;">
                <a class="btn btn-success btn-sm" (click)="waterFertilizePlantPatch('fertilize')">Fertilize</a>
            </div>
            <div style="margin-right: .5rem;">
                <a class="btn btn-outline-secondary btn-sm" (click)="navigateToPlantEditPage()">Edit</a>
            </div>
            <div>
                <a class="btn btn-outline-secondary btn-sm" (click)="navigateToAddPlantPage()">Add +</a>
            </div>
            <div>
                <a class="btn btn-outline-secondary btn-sm" (click)="startDeleteProcess()">Delete -</a>
            </div>
        </div>
    </div>
</div>
<div *ngIf="deletePanelIsOn">
    <page-delete-prompt 
    [plantName]="plant?.name"
    (noFunction)="cancelDelete()"
    (yesFunction)="deletePlant()"
     ></page-delete-prompt>
</div>